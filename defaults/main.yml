---
# defaults file for ansible-role-prometheus

# role flags
prometheus_skip_config: false
promehtues_use_role_rules: false
prometheus_alertmanager_custom_config: false
prometheus_cratedb_remote_write: false
prometheus_cratedb_remote_read: false
prometheus_installation_method: 'github-release' # pkg, github-release, docker [WIP]

prometheus_linux_arch: '{{ "amd64" if (ansible_userspace_bits == "64" ) else "386" }}'
prometheus_linux_suffix: '{{ ansible_system | lower }}-{{ prometheus_linux_arch }}'
prometheus_install_path: '/opt/prometheus'
# https://github.com/prometheus/prometheus/releases/download/v1.8.0/prometheus-1.8.0.{{ prometheus_linux_suffix }}.tar.gz
prometheus_version: 2.0.0
prometheus_pkg_url: https://github.com/prometheus/prometheus/releases/download/v{{ prometheus_version }}/prometheus-{{ prometheus_version }}.{{ prometheus_linux_suffix }}.tar.gz

# https://github.com/prometheus/node_exporter/releases/download/v0.15.0/node_exporter-0.15.0.{{ prometheus_linux_suffix }}.tar.gz
prometheus_node_exporter_version: 0.15.1
prometheus_node_exporter_pkg_url: https://github.com/prometheus/node_exporter/releases/download/v{{ prometheus_node_exporter_version }}/node_exporter-{{ prometheus_node_exporter_version }}.{{ prometheus_linux_suffix }}.tar.gz

# https://github.com/prometheus/alertmanager/releases/download/v0.9.1/alertmanager-0.9.1.{{ prometheus_linux_suffix }}.tar.gz
prometheus_alertmanager_version: 0.11.0
prometheus_alertmanager_pkg_url: https://github.com/prometheus/alertmanager/releases/download/v{{ prometheus_alertmanager_version }}/alertmanager-{{ prometheus_alertmanager_version }}.{{ prometheus_linux_suffix }}.tar.gz

# https://github.com/prometheus/pushgateway/releases/download/v0.4.0/pushgateway-0.4.0.linux-amd64.tar.gz
prometheus_pushgateway_version: 0.4.0
prometheus_pushgateway_pkg_url: https://github.com/prometheus/pushgateway/releases/download/v{{ prometheus_pushgateway_version }}/pushgateway-{{ prometheus_pushgateway_version }}.{{ prometheus_linux_suffix }}.tar.gz

# https://cdn.crate.io/downloads/dist/prometheus/crate_adapter-0.1-2017100611-d24e213.linux.amd64.tar.gz
prometheus_crate_adapter_version: 0.1-2017100611-d24e213
prometheus_crate_adapter_pkg_url: https://cdn.crate.io/downloads/dist/prometheus/crate_adapter-{{ prometheus_crate_adapter_version }}.{{ ansible_system|lower }}.{{ prometheus_linux_arch }}.tar.gz

# default components
prometheus_components:
  - alertmanager
  - node_exporter
  - prometheus
#  - pushgateway

prometheus_user: prometheus
prometheus_group: prometheus

prometheus_defaults_file: /etc/default/alertmanager
prometheus_conf_dir: /etc/prometheus
prometheus_home_dir: /var/lib/prometheus

prometheus_rules_dir: "{{ prometheus_conf_dir }}/alerts"

prometheus_storage_local_path: /var/lib/prometheus/data
prometheus_opt_port: 9090

prometheus_opt_alertmanager_url: "http://{{ ansible_all_ipv4_addresses[0] }}:{{ prometheus_alertmanager_opt_port }}"
prometheus_opt_config_file: "{{ prometheus_conf_dir }}/prometheus.yml"
prometheus_opt_log_format: 'logger:syslog?appname=prometheus&local=7'
prometheus_opt_log_level: info
